{% extends "accounts/home.html" %}
{% load widget_tweaks %}
{% load static %}

{% block content %}

<div class="card p-4 shadow-sm">

  <h3 class="fw-bold fs-5 mb-4">Nueva Transacción</h3>

  <form method="post" class="row g-3">
    {% csrf_token %}

    <!-- ========================= -->
    <!-- Contrato -->
    <!-- ========================= -->
    <div class="col-md-8">
      <label class="form-label">Contrato (Placa - Cliente)</label>
      {{ factura_form.contrato|add_class:"form-select" }}
    </div>

    <div class="col-md-4 d-flex align-items-end justify-content-end">
      <button type="submit"
              class="btn btn-primary btn-app-action w-100">
        Guardar Factura
      </button>
    </div>

    <!-- ========================= -->
    <!-- Ítems de la factura -->
    <!-- ========================= -->
    <div class="col-12 mt-4">
      <h6 class="fw-bold mb-3">Ítems</h6>
    </div>

    {{ item_formset.management_form }}

    {% for form in item_formset %}
      <div class="row g-3 align-items-end border rounded p-3 mb-2">

        <div class="col-md-2">
          <label class="form-label">Tipo</label>
          {{ form.tipo_item|add_class:"form-select" }}
        </div>

        <div class="col-md-4">
          <label class="form-label">Descripción</label>
          {{ form.descripcion|add_class:"form-control" }}
        </div>

        <div class="col-md-2">
          <label class="form-label">Cantidad</label>
          {{ form.cantidad|add_class:"form-control" }}
        </div>

        <div class="col-md-2">
          <label class="form-label">Valor Unitario</label>
          {{ form.valor_unitario|add_class:"form-control" }}
        </div>

        <div class="col-md-2 text-end">
          {{ form.DELETE }}
        </div>

      </div>
    {% endfor %}

  </form>

</div>

{% endblock %}
